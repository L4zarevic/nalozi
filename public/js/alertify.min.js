!function(e){"use strict";var t={ENTER:13,ESC:27,F1:112,F12:123,LEFT:37,RIGHT:39,TAB:9},n={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"]):not(:disabled):not(.ajs-reset)'].join(":not(:disabled):not(.ajs-reset),"),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},i=[];function s(e,t){e.className+=" "+t}function o(e,t){for(var n=e.className.split(" "),i=t.split(" "),s=0;s<i.length;s+=1){var o=n.indexOf(i[s]);o>-1&&n.splice(o,1)}e.className=n.join(" ")}function a(){return"rtl"===e.getComputedStyle(document.body).direction}function l(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function r(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function c(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function d(e){if(null===e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n+=1)t.push(d(e[n]));return t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return(t=new RegExp(e.source)).global=e.global,t.ignoreCase=e.ignoreCase,t.multiline=e.multiline,t.lastIndex=e.lastIndex,t;if("object"==typeof e){for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=d(e[i]));return t}return e}function u(e,t){if(e.elements){var n=e.elements.root;n.parentNode.removeChild(n),delete e.elements,e.settings=d(e.__settings),e.__init=t,delete e.__internal}}var m=!1;try{var f=Object.defineProperty({},"passive",{get:function(){m=!0}});e.addEventListener("test",f,f),e.removeEventListener("test",f,f)}catch(e){}var h=function(e,t,n,i,s){e.addEventListener(t,n,m?{capture:i,passive:s}:!0===i)},p=function(e,t,n,i,s){e.removeEventListener(t,n,m?{capture:i,passive:s}:!0===i)},b=function(){var e,t,n=!1,i={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==document.documentElement.style[e]){t=i[e],n=!0;break}return{type:t,supported:n}}();function v(e,t){return function(){if(arguments.length>0){for(var n=[],i=0;i<arguments.length;i+=1)n.push(arguments[i]);return n.push(e),t.apply(e,n)}return t.apply(e,[null,e])}}function g(e,t){return{index:e,button:t,cancel:!1}}function y(e,t){if("function"==typeof t.get(e))return t.get(e).call(t)}var _=function(){var m,f,_=[],x=!1,H=e.navigator.userAgent.indexOf("Safari")>-1&&e.navigator.userAgent.indexOf("Chrome")<0,O={dimmer:'<div class="ajs-dimmer"></div>',modal:'<div class="ajs-modal" tabindex="0"></div>',dialog:'<div class="ajs-dialog" tabindex="0"></div>',reset:'<button class="ajs-reset"></button>',commands:'<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',header:'<div class="ajs-header"></div>',body:'<div class="ajs-body"></div>',content:'<div class="ajs-content"></div>',footer:'<div class="ajs-footer"></div>',buttons:{primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},button:'<button class="ajs-button"></button>',resizeHandle:'<div class="ajs-handle"></div>'},T={animationIn:"ajs-in",animationOut:"ajs-out",base:"alertify",basic:"ajs-basic",capture:"ajs-capture",closable:"ajs-closable",fixed:"ajs-fixed",frameless:"ajs-frameless",hidden:"ajs-hidden",maximize:"ajs-maximize",maximized:"ajs-maximized",maximizable:"ajs-maximizable",modeless:"ajs-modeless",movable:"ajs-movable",noSelection:"ajs-no-selection",noOverflow:"ajs-no-overflow",noPadding:"ajs-no-padding",pin:"ajs-pin",pinnable:"ajs-pinnable",prefix:"ajs-",resizable:"ajs-resizable",restore:"ajs-restore",shake:"ajs-shake",unpinned:"ajs-unpinned",noTransition:"ajs-no-transition"};function w(e){if(!e.__internal){var t;k.defaults.hooks.preinit(e),delete e.__init,e.__settings||(e.__settings=d(e.settings)),"function"==typeof e.setup?((t=e.setup()).options=t.options||{},t.focus=t.focus||{}):t={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof e.hooks&&(e.hooks={});var n=[];if(Array.isArray(t.buttons))for(var i=0;i<t.buttons.length;i+=1){var o=t.buttons[i],a={};for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);n.push(a)}var r=e.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:n,focus:t.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},c={};c.root=document.createElement("div"),c.root.style.display="none",c.root.className=T.base+" "+T.hidden+" ",c.root.innerHTML=O.dimmer+O.modal,c.dimmer=c.root.firstChild,c.modal=c.root.lastChild,c.modal.innerHTML=O.dialog,c.dialog=c.modal.firstChild,c.dialog.innerHTML=O.reset+O.commands+O.header+O.body+O.footer+O.resizeHandle+O.reset,c.reset=[],c.reset.push(c.dialog.firstChild),c.reset.push(c.dialog.lastChild),c.commands={},c.commands.container=c.reset[0].nextSibling,c.commands.pin=c.commands.container.firstChild,c.commands.maximize=c.commands.pin.nextSibling,c.commands.close=c.commands.maximize.nextSibling,c.header=c.commands.container.nextSibling,c.body=c.header.nextSibling,c.body.innerHTML=O.content,c.content=c.body.firstChild,c.footer=c.body.nextSibling,c.footer.innerHTML=O.buttons.auxiliary+O.buttons.primary,c.resizeHandle=c.footer.nextSibling,c.buttons={},c.buttons.auxiliary=c.footer.firstChild,c.buttons.primary=c.buttons.auxiliary.nextSibling,c.buttons.primary.innerHTML=O.button,c.buttonTemplate=c.buttons.primary.firstChild,c.buttons.primary.removeChild(c.buttonTemplate);for(var u=0;u<e.__internal.buttons.length;u+=1){var m=e.__internal.buttons[u];for(var f in _.indexOf(m.key)<0&&_.push(m.key),m.element=c.buttonTemplate.cloneNode(),m.element.innerHTML=m.text,"string"==typeof m.className&&""!==m.className&&s(m.element,m.className),m.attrs)"className"!==f&&m.attrs.hasOwnProperty(f)&&m.element.setAttribute(f,m.attrs[f]);"auxiliary"===m.scope?c.buttons.auxiliary.appendChild(m.element):c.buttons.primary.appendChild(m.element)}for(var h in e.elements=c,r.resetHandler=v(e,ee),r.beginMoveHandler=v(e,pe),r.beginResizeHandler=v(e,Oe),r.bringToFrontHandler=v(e,N),r.modalClickHandler=v(e,G),r.buttonsClickHandler=v(e,V),r.commandsClickHandler=v(e,S),r.transitionInHandler=v(e,ie),r.transitionOutHandler=v(e,se),r.options)void 0!==t.options[h]?e.set(h,t.options[h]):k.defaults.hasOwnProperty(h)?e.set(h,k.defaults[h]):"title"===h&&e.set(h,k.defaults.glossary[h]);"function"==typeof e.build&&e.build(),k.defaults.hooks.postinit(e)}document.body.appendChild(e.elements.root)}function z(){e.scrollTo(m,f)}function C(){for(var e=0,t=0;t<i.length;t+=1){var n=i[t];(n.isModal()||n.isMaximized())&&(e+=1)}0===e&&document.body.className.indexOf(T.noOverflow)>=0?(o(document.body,T.noOverflow),M(!1)):e>0&&document.body.className.indexOf(T.noOverflow)<0&&(M(!0),s(document.body,T.noOverflow))}var E="",j=0;function M(t){k.defaults.preventBodyShift&&(t&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(j=f,E=e.getComputedStyle(document.body).top,s(document.body,T.fixed),document.body.style.top=-f+"px"):t||(f=j,document.body.style.top=E,o(document.body,T.fixed),z()))}function N(e,t){for(var n=i.indexOf(t)+1;n<i.length;n+=1)if(i[n].isModal())return;return document.body.lastChild!==t.elements.root&&(document.body.appendChild(t.elements.root),i.splice(i.indexOf(t),1),i.push(t),$(t)),!1}function L(e,t,n,i){switch(t){case"title":e.setHeader(i);break;case"modal":!function(e){e.get("modal")?(o(e.elements.root,T.modeless),e.isOpen()&&(je(e),U(e),C())):(s(e.elements.root,T.modeless),e.isOpen()&&(Ee(e),U(e),C()))}(e);break;case"basic":!function(e){e.get("basic")?s(e.elements.root,T.basic):o(e.elements.root,T.basic)}(e);break;case"frameless":!function(e){e.get("frameless")?s(e.elements.root,T.frameless):o(e.elements.root,T.frameless)}(e);break;case"pinned":!function(e){e.get("pinned")?(o(e.elements.root,T.unpinned),e.isOpen()&&D(e)):(s(e.elements.root,T.unpinned),e.isOpen()&&!e.isModal()&&B(e))}(e);break;case"closable":!function(e){e.get("closable")?(s(e.elements.root,T.closable),function(e){h(e.elements.modal,"click",e.__internal.modalClickHandler)}(e)):(o(e.elements.root,T.closable),function(e){p(e.elements.modal,"click",e.__internal.modalClickHandler)}(e))}(e);break;case"maximizable":!function(e){e.get("maximizable")?s(e.elements.root,T.maximizable):o(e.elements.root,T.maximizable)}(e);break;case"pinnable":!function(e){e.get("pinnable")?s(e.elements.root,T.pinnable):o(e.elements.root,T.pinnable)}(e);break;case"movable":!function(e){e.get("movable")?(s(e.elements.root,T.movable),e.isOpen()&&Me(e)):(ge(e),o(e.elements.root,T.movable),e.isOpen()&&Ne(e))}(e);break;case"resizable":!function(e){e.get("resizable")?(s(e.elements.root,T.resizable),e.isOpen()&&Le(e)):(ze(e),o(e.elements.root,T.resizable),e.isOpen()&&Ae(e))}(e);break;case"padding":i?o(e.elements.root,T.noPadding):e.elements.root.className.indexOf(T.noPadding)<0&&s(e.elements.root,T.noPadding);break;case"overflow":i?o(e.elements.root,T.noOverflow):e.elements.root.className.indexOf(T.noOverflow)<0&&s(e.elements.root,T.noOverflow);break;case"transition":!function(e,t,n){"string"==typeof n&&o(e.elements.root,T.prefix+n),s(e.elements.root,T.prefix+t),e.elements.root.offsetWidth}(e,i,n);break;case"transitionOff":!function(e){e.get("transitionOff")?s(e.elements.root,T.noTransition):o(e.elements.root,T.noTransition)}(e)}"function"==typeof e.hooks.onupdate&&e.hooks.onupdate.call(e,t,n,i)}function A(e,t,n,i,s){var o,a={op:void 0,items:[]};if(void 0===s&&"string"==typeof i)a.op="get",t.hasOwnProperty(i)?(a.found=!0,a.value=t[i]):(a.found=!1,a.value=void 0);else if(a.op="set","object"==typeof i){var l=i;for(var r in l)t.hasOwnProperty(r)?(t[r]!==l[r]&&(o=t[r],t[r]=l[r],n.call(e,r,o,l[r])),a.items.push({key:r,value:l[r],found:!0})):a.items.push({key:r,value:l[r],found:!1})}else{if("string"!=typeof i)throw new Error("args must be a string or object");t.hasOwnProperty(i)?(t[i]!==s&&(o=t[i],t[i]=s,n.call(e,i,o,s)),a.items.push({key:i,value:s,found:!0})):a.items.push({key:i,value:s,found:!1})}return a}function I(e){var t;J(e,function(n){return t=!0!==e.get("invokeOnCloseOff")&&!0===n.invokeOnClose}),!t&&e.isOpen()&&e.close()}function S(e,t){switch(e.srcElement||e.target){case t.elements.commands.pin:t.isPinned()?W(t):P(t);break;case t.elements.commands.maximize:t.isMaximized()?R(t):F(t);break;case t.elements.commands.close:I(t)}return!1}function P(e){e.set("pinned",!0)}function W(e){e.set("pinned",!1)}function F(e){y("onmaximize",e),s(e.elements.root,T.maximized),e.isOpen()&&C(),y("onmaximized",e)}function R(e){y("onrestore",e),o(e.elements.root,T.maximized),e.isOpen()&&C(),y("onrestored",e)}function B(e){var t=r();e.elements.modal.style.marginTop=l()+"px",e.elements.modal.style.marginLeft=t+"px",e.elements.modal.style.marginRight=-t+"px"}function D(e){var t=parseInt(e.elements.modal.style.marginTop,10),n=parseInt(e.elements.modal.style.marginLeft,10);if(e.elements.modal.style.marginTop="",e.elements.modal.style.marginLeft="",e.elements.modal.style.marginRight="",e.isOpen()){var i=0,s=0;""!==e.elements.dialog.style.top&&(i=parseInt(e.elements.dialog.style.top,10)),e.elements.dialog.style.top=i+(t-l())+"px",""!==e.elements.dialog.style.left&&(s=parseInt(e.elements.dialog.style.left,10)),e.elements.dialog.style.left=s+(n-r())+"px"}}function U(e){e.get("modal")||e.get("pinned")?D(e):B(e)}var X=!1,Y=0;function G(e,t){if(e.timeStamp-Y>200&&(Y=e.timeStamp)&&!X){var n=e.srcElement||e.target;!0===t.get("closableByDimmer")&&n===t.elements.modal&&I(t)}X=!1}var q=0,K=!1;function J(e,t){if(Date.now()-q>200&&(q=Date.now()))for(var n=0;n<e.__internal.buttons.length;n+=1){var i=e.__internal.buttons[n];if(!i.element.disabled&&t(i)){var s=g(n,i);"function"==typeof e.callback&&e.callback.apply(e,[s]),!1===s.cancel&&e.close();break}}}function V(e,t){var n=e.srcElement||e.target;J(t,function(e){return e.element===n&&(K=!0)})}function Q(e){if(!K){var n=i[i.length-1],s=e.keyCode;return 0===n.__internal.buttons.length&&s===t.ESC&&!0===n.get("closable")?(I(n),!1):_.indexOf(s)>-1?(J(n,function(e){return e.key===s}),!1):void 0}K=!1}function Z(e){var n=i[i.length-1],s=e.keyCode;if(s===t.LEFT||s===t.RIGHT){for(var o=n.__internal.buttons,a=0;a<o.length;a+=1)if(document.activeElement===o[a].element)switch(s){case t.LEFT:return void o[(a||o.length)-1].element.focus();case t.RIGHT:return void o[(a+1)%o.length].element.focus()}}else if(s<t.F12+1&&s>t.F1-1&&_.indexOf(s)>-1)return e.preventDefault(),e.stopPropagation(),J(n,function(e){return e.key===s}),!1}function $(e,t){if(t)t.focus();else{var n=e.__internal.focus,i=n.element;switch(typeof n.element){case"number":e.__internal.buttons.length>n.element&&(i=!0===e.get("basic")?e.elements.reset[0]:e.__internal.buttons[n.element].element);break;case"string":i=e.elements.body.querySelector(n.element);break;case"function":i=n.element.call(e)}(!0===e.get("defaultFocusOff")||null==i&&0===e.__internal.buttons.length)&&(i=e.elements.reset[0]),i&&i.focus&&(i.focus(),n.select&&i.select&&i.select())}}function ee(e,t){if(!t)for(var n=i.length-1;n>-1;n-=1)if(i[n].isModal()){t=i[n];break}if(t&&t.isModal()){var s,o=t.elements.reset[0],a=t.elements.reset[1],l=e.relatedTarget,r=t.elements.root.contains(l),c=e.srcElement||e.target;if(c===o&&!r||c===a&&l===o)return;c===a||c===document.body?s=o:c===o&&l===a?s=te(t):c===o&&r&&(s=te(t,!0)),$(t,s)}}function te(e,t){var i=[].slice.call(e.elements.dialog.querySelectorAll(n.tabbable));t&&i.reverse();for(var s=0;s<i.length;s+=1){var o=i[s];if(o.offsetParent||o.offsetWidth||o.offsetHeight||o.getClientRects().length)return o}}function ne(e){var n=i[i.length-1];n&&e.shiftKey&&e.keyCode===t.TAB&&n.elements.reset[1].focus()}function ie(e,t){clearTimeout(t.__internal.timerIn),$(t),K=!1,y("onfocus",t),p(t.elements.dialog,b.type,t.__internal.transitionInHandler),o(t.elements.root,T.animationIn)}function se(e,t){clearTimeout(t.__internal.timerOut),p(t.elements.dialog,b.type,t.__internal.transitionOutHandler),ge(t),ze(t),t.isMaximized()&&!t.get("startMaximized")&&R(t),"function"==typeof t.__internal.destroy&&t.__internal.destroy.apply(t)}var oe=null,ae=0,le=0,re="pageX",ce="pageY",de=null,ue=!1,me=null;function fe(e,t){var n=e[re]-ae,i=e[ce]-le;ue&&(i-=document.body.scrollTop),t.style.left=n+"px",t.style.top=i+"px"}function he(e,t){var n=e[re]-ae,i=e[ce]-le;ue&&(i-=document.body.scrollTop),t.style.left=Math.min(de.maxLeft,Math.max(de.minLeft,n))+"px",t.style.top=ue?Math.min(de.maxTop,Math.max(de.minTop,i))+"px":Math.max(de.minTop,i)+"px"}function pe(e,t){if(null===ye&&!t.isMaximized()&&t.get("movable")){var n,i=0,o=0;if("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0],re="clientX",ce="clientY"):0===e.button&&(n=e),n){var a=t.elements.dialog;if(s(a,T.capture),a.style.left&&(i=parseInt(a.style.left,10)),a.style.top&&(o=parseInt(a.style.top,10)),ae=n[re]-i,le=n[ce]-o,t.isModal()?le+=t.elements.modal.scrollTop:t.isPinned()&&(le-=document.body.scrollTop),t.get("moveBounded")){var l=a,r=-i,c=-o;do{r+=l.offsetLeft,c+=l.offsetTop}while(l=l.offsetParent);de={maxLeft:r,minLeft:-r,maxTop:document.documentElement.clientHeight-a.clientHeight-c,minTop:-c},me=he}else de=null,me=fe;return y("onmove",t),ue=!t.isModal()&&t.isPinned(),oe=t,me(n,a),s(document.body,T.noSelection),!1}}}function be(e){var t;oe&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&me(t,oe.elements.dialog))}function ve(){if(oe){var e=oe;oe=de=null,o(document.body,T.noSelection),o(e.elements.dialog,T.capture),y("onmoved",e)}}function ge(e){oe=null;var t=e.elements.dialog;t.style.left=t.style.top=""}var ye=null,_e=Number.Nan,xe=0,ke=0,He=0;function Oe(e,t){var n;if(!t.isMaximized()&&("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0]):0===e.button&&(n=e),n)){y("onresize",t),ye=t,He=t.elements.resizeHandle.offsetHeight/2;var i=t.elements.dialog;return s(i,T.capture),_e=parseInt(i.style.left,10),i.style.height=i.offsetHeight+"px",i.style.minHeight=t.elements.header.offsetHeight+t.elements.footer.offsetHeight+"px",i.style.width=(xe=i.offsetWidth)+"px","none"!==i.style.maxWidth&&(i.style.minWidth=(ke=i.offsetWidth)+"px"),i.style.maxWidth="none",s(document.body,T.noSelection),!1}}function Te(e){var t;ye&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&function(e,t,n){var i,s,o=t,l=0,r=0;do{l+=o.offsetLeft,r+=o.offsetTop}while(o=o.offsetParent);!0===n?(i=e.pageX,s=e.pageY):(i=e.clientX,s=e.clientY);var c=a();if(c&&(i=document.body.offsetWidth-i,isNaN(_e)||(l=document.body.offsetWidth-l-t.offsetWidth)),t.style.height=s-r+He+"px",t.style.width=i-l+He+"px",!isNaN(_e)){var d=.5*Math.abs(t.offsetWidth-xe);c&&(d*=-1),t.offsetWidth>xe?t.style.left=_e+d+"px":t.offsetWidth>=ke&&(t.style.left=_e-d+"px")}}(t,ye.elements.dialog,!ye.get("modal")&&!ye.get("pinned")))}function we(){if(ye){var e=ye;ye=null,o(document.body,T.noSelection),o(e.elements.dialog,T.capture),X=!0,y("onresized",e)}}function ze(e){ye=null;var t=e.elements.dialog;"none"===t.style.maxWidth&&(t.style.maxWidth=t.style.minWidth=t.style.width=t.style.height=t.style.minHeight=t.style.left="",_e=Number.Nan,xe=ke=He=0)}function Ce(){for(var e=0;e<i.length;e+=1){var t=i[e];t.get("autoReset")&&(ge(t),ze(t))}}function Ee(e){h(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function je(e){p(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function Me(e){h(e.elements.header,"mousedown",e.__internal.beginMoveHandler),h(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}function Ne(e){p(e.elements.header,"mousedown",e.__internal.beginMoveHandler),p(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}function Le(e){h(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),h(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}function Ae(e){p(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),p(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}return{__init:w,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(T.modeless)<0},isMaximized:function(){return this.elements.root.className.indexOf(T.maximized)>-1},isPinned:function(){return this.elements.root.className.indexOf(T.unpinned)<0},maximize:function(){return this.isMaximized()||F(this),this},restore:function(){return this.isMaximized()&&R(this),this},pin:function(){return this.isPinned()||P(this),this},unpin:function(){return this.isPinned()&&W(this),this},bringToFront:function(){return N(0,this),this},moveTo:function(e,t){if(!isNaN(e)&&!isNaN(t)){y("onmove",this);var n=this.elements.dialog,i=n,s=0,o=0;n.style.left&&(s-=parseInt(n.style.left,10)),n.style.top&&(o-=parseInt(n.style.top,10));do{s+=i.offsetLeft,o+=i.offsetTop}while(i=i.offsetParent);var l=e-s,r=t-o;a()&&(l*=-1),n.style.left=l+"px",n.style.top=r+"px",y("onmoved",this)}return this},resizeTo:function(e,t){var n=parseFloat(e),i=parseFloat(t),s=/(\d*\.\d+|\d+)%/;if(!isNaN(n)&&!isNaN(i)&&!0===this.get("resizable")){y("onresize",this),(""+e).match(s)&&(n=n/100*document.documentElement.clientWidth),(""+t).match(s)&&(i=i/100*document.documentElement.clientHeight);var o=this.elements.dialog;"none"!==o.style.maxWidth&&(o.style.minWidth=(ke=o.offsetWidth)+"px"),o.style.maxWidth="none",o.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",o.style.width=n+"px",o.style.height=i+"px",y("onresized",this)}return this},setting:function(e,t){var n=this,i=A(this,this.__internal.options,function(e,t,i){L(n,e,t,i)},e,t);if("get"===i.op)return i.found?i.value:void 0!==this.settings?A(this,this.settings,this.settingUpdated||function(){},e,t).value:void 0;if("set"===i.op){if(i.items.length>0)for(var s=this.settingUpdated||function(){},o=0;o<i.items.length;o+=1){var a=i.items[o];a.found||void 0===this.settings||A(this,this.settings,s,a.key,a.value)}return this}},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},setHeader:function(t){return"string"==typeof t?(c(this.elements.header),this.elements.header.innerHTML=t):t instanceof e.HTMLElement&&this.elements.header.firstChild!==t&&(c(this.elements.header),this.elements.header.appendChild(t)),this},setContent:function(t){return"string"==typeof t?(c(this.elements.content),this.elements.content.innerHTML=t):t instanceof e.HTMLElement&&this.elements.content.firstChild!==t&&(c(this.elements.content),this.elements.content.appendChild(t)),this},showModal:function(e){return this.show(!0,e)},show:function(t,n){if(w(this),this.__internal.isOpen){ge(this),ze(this),s(this.elements.dialog,T.shake);var a=this;setTimeout(function(){o(a.elements.dialog,T.shake)},200)}else{if(this.__internal.isOpen=!0,i.push(this),k.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",x="0"),"function"==typeof this.prepare&&this.prepare(),d=this,1===i.length&&(h(e,"resize",Ce),h(document.body,"keyup",Q),h(document.body,"keydown",Z),h(document.body,"focus",ee),h(document.documentElement,"mousemove",be),h(document.documentElement,"touchmove",be,!1,!1),h(document.documentElement,"mouseup",ve),h(document.documentElement,"touchend",ve),h(document.documentElement,"mousemove",Te),h(document.documentElement,"touchmove",Te,!1,!1),h(document.documentElement,"mouseup",we),h(document.documentElement,"touchend",we)),h(d.elements.commands.container,"click",d.__internal.commandsClickHandler),h(d.elements.footer,"click",d.__internal.buttonsClickHandler),h(d.elements.reset[0],"focusin",d.__internal.resetHandler),h(d.elements.reset[0],"keydown",ne),h(d.elements.reset[1],"focusin",d.__internal.resetHandler),K=!0,h(d.elements.dialog,b.type,d.__internal.transitionInHandler),d.get("modal")||Ee(d),d.get("resizable")&&Le(d),d.get("movable")&&Me(d),void 0!==t&&this.set("modal",t),m=r(),f=l(),C(),"string"==typeof n&&""!==n&&(this.__internal.className=n,s(this.elements.root,n)),this.get("startMaximized")?this.maximize():this.isMaximized()&&R(this),U(this),this.elements.root.removeAttribute("style"),o(this.elements.root,T.animationOut),s(this.elements.root,T.animationIn),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,b.supported?1e3:100),H){var c=this.elements.root;c.style.display="none",setTimeout(function(){c.style.display="block"},0)}this.elements.root.offsetWidth,o(this.elements.root,T.hidden),z(),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),y("onshow",this)}var d;return this},close:function(){var t;return this.__internal.isOpen&&!1!==y("onclosing",this)&&(t=this,1===i.length&&(p(e,"resize",Ce),p(document.body,"keyup",Q),p(document.body,"keydown",Z),p(document.body,"focus",ee),p(document.documentElement,"mousemove",be),p(document.documentElement,"mouseup",ve),p(document.documentElement,"mousemove",Te),p(document.documentElement,"mouseup",we)),p(t.elements.commands.container,"click",t.__internal.commandsClickHandler),p(t.elements.footer,"click",t.__internal.buttonsClickHandler),p(t.elements.reset[0],"focusin",t.__internal.resetHandler),p(t.elements.reset[0],"keydown",ne),p(t.elements.reset[1],"focusin",t.__internal.resetHandler),h(t.elements.dialog,b.type,t.__internal.transitionOutHandler),t.get("modal")||je(t),t.get("movable")&&Ne(t),t.get("resizable")&&Ae(t),o(this.elements.root,T.animationIn),s(this.elements.root,T.animationOut),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,b.supported?1e3:100),s(this.elements.root,T.hidden),this.elements.modal.offsetWidth,k.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),void 0!==this.__internal.className&&""!==this.__internal.className&&o(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),y("onclose",this),i.splice(i.indexOf(this),1),this.__internal.isOpen=!1,C()),i.length||"0"!==x||document.body.removeAttribute("tabindex"),this},closeOthers:function(){return k.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){u(this,w)},this.close()):this.__internal.destroy||u(this,w)),this}}}(),x=function(){var t,i=[],a=n.notifier.classes,l=a.base;function r(e){e.__internal||(e.__internal={position:k.defaults.notifier.position,delay:k.defaults.notifier.delay},t=document.createElement("DIV"),("transitionOff"in n.notifier?n.notifier.transitionOff:n.transitionOff)&&(l=a.base+" ajs-no-transition"),d(e));t.parentNode!==document.body&&document.body.appendChild(t)}function d(e){switch(t.className=l,e.__internal.position){case"top-right":s(t,a.top+" "+a.right);break;case"top-left":s(t,a.top+" "+a.left);break;case"top-center":s(t,a.top+" "+a.center);break;case"bottom-left":s(t,a.bottom+" "+a.left);break;case"bottom-center":s(t,a.bottom+" "+a.center);break;default:case"bottom-right":s(t,a.bottom+" "+a.right)}}function u(n,l){function r(e,t){t.__internal.closeButton&&"true"!==e.target.getAttribute("data-close")||t.dismiss(!0)}function d(e,n){p(n.element,b.type,d),t.removeChild(n.element)}function u(e){clearTimeout(e.__internal.timer),clearTimeout(e.__internal.transitionTimeout)}return(m={element:n,push:function(e,n){if(!this.__internal.pushed){var o,l;switch((r=this).__internal.pushed=!0,i.push(r),u(this),arguments.length){case 0:l=this.__internal.delay;break;case 1:"number"==typeof e?l=e:(o=e,l=this.__internal.delay);break;case 2:o=e,l=n}return this.__internal.closeButton=k.defaults.notifier.closeButton,void 0!==o&&this.setContent(o),x.__internal.position.indexOf("top")<0?t.appendChild(this.element):t.insertBefore(this.element,t.firstChild),this.element.offsetWidth,s(this.element,a.visible),h(this.element,"click",this.__internal.clickHandler),this.delay(l)}var r;return this},ondismiss:function(){},callback:l,dismiss:function(e){var n;return this.__internal.pushed&&(u(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||(p(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===t&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,b.supported?1e3:100),o(this.element,a.visible),"function"==typeof this.callback&&this.callback.call(this,e)),n=this,i.splice(i.indexOf(n),1),n.__internal.pushed=!1)),this},delay:function(e){if(u(this),this.__internal.delay=void 0===e||isNaN(+e)?x.__internal.delay:+e,this.__internal.delay>0){var t=this;this.__internal.timer=setTimeout(function(){t.dismiss()},1e3*this.__internal.delay)}return this},setContent:function(t){if("string"==typeof t?(c(this.element),this.element.innerHTML=t):t instanceof e.HTMLElement&&this.element.firstChild!==t&&(c(this.element),this.element.appendChild(t)),this.__internal.closeButton){var n=document.createElement("span");s(n,a.close),n.setAttribute("data-close",!0),this.element.appendChild(n)}return this},dismissOthers:function(){return x.dismissAll(this),this}}).__internal||(m.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},m.__internal.clickHandler=v(m,r),m.__internal.transitionEndHandler=v(m,d)),m;var m}return{setting:function(e,t){if(r(this),void 0===t)return this.__internal[e];switch(e){case"position":this.__internal.position=t,d(this);break;case"delay":this.__internal.delay=t}return this},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},create:function(e,t){r(this);var n=document.createElement("div");return n.className=a.message+("string"==typeof e&&""!==e?" "+a.prefix+e:""),u(n,t)},dismissAll:function(e){for(var t=i.slice(0),n=0;n<t.length;n+=1){var s=t[n];void 0!==e&&e===s||s.dismiss()}}}}();var k=new function(){var e={};function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function s(t){var n=e[t].dialog;return n&&"function"==typeof n.__init&&n.__init(n),n}return{defaults:n,dialog:function(n,i,o,a){if("function"!=typeof i)return s(n);if(this.hasOwnProperty(n))throw new Error("alertify.dialog: name already exists");var l=function(n,i,s,o){var a={dialog:null,factory:i};return void 0!==o&&(a.factory=function(){return t(new e[o].factory,new i)}),s||(a.dialog=t(new a.factory,_)),e[n]=a}(n,i,o,a);this[n]=o?function(){if(0===arguments.length)return l.dialog;var e=t(new l.factory,_);return e&&"function"==typeof e.__init&&e.__init(e),e.main.apply(e,arguments),e.show.apply(e)}:function(){if(l.dialog&&"function"==typeof l.dialog.__init&&l.dialog.__init(l.dialog),0===arguments.length)return l.dialog;var e=l.dialog;return e.main.apply(l.dialog,arguments),e.show.apply(l.dialog)}},closeAll:function(e){for(var t=i.slice(0),n=0;n<t.length;n+=1){var s=t[n];void 0!==e&&e===s||s.close()}},setting:function(e,t,n){if("notifier"===e)return x.setting(t,n);var i=s(e);return i?i.setting(t,n):void 0},set:function(e,t,n){return this.setting(e,t,n)},get:function(e,t){return this.setting(e,t)},notify:function(e,t,n,i){return x.create(t,i).push(e,n)},message:function(e,t,n){return x.create(null,n).push(e,t)},success:function(e,t,n){return x.create("success",n).push(e,t)},error:function(e,t,n){return x.create("error",n).push(e,t)},warning:function(e,t,n){return x.create("warning",n).push(e,t)},dismissAll:function(){x.dismissAll()}}};k.dialog("alert",function(){return{main:function(e,t,n){var i,s,o;switch(arguments.length){case 1:s=e;break;case 2:"function"==typeof t?(s=e,o=t):(i=e,s=t);break;case 3:i=e,s=t,o=n}return this.set("title",i),this.set("message",s),this.set("onok",o),this},setup:function(){return{buttons:[{text:k.defaults.glossary.ok,key:t.ESC,invokeOnClose:!0,className:k.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},callback:function(e){if("function"==typeof this.get("onok")){var t=this.get("onok").call(this,e);void 0!==t&&(e.cancel=!t)}}}}),k.dialog("confirm",function(){var e={timer:null,index:null,text:null,duration:null,task:function(t,i){if(i.isOpen()){if(i.__internal.buttons[e.index].element.innerHTML=e.text+" (&#8207;"+e.duration+"&#8207;) ",e.duration-=1,-1===e.duration){n(i);var s=i.__internal.buttons[e.index],o=g(e.index,s);"function"==typeof i.callback&&i.callback.apply(i,[o]),!1!==o.close&&i.close()}}else n(i)}};function n(t){null!==e.timer&&(clearInterval(e.timer),e.timer=null,t.__internal.buttons[e.index].element.innerHTML=e.text)}function i(t,i,s){n(t),e.duration=s,e.index=i,e.text=t.__internal.buttons[i].element.innerHTML,e.timer=setInterval(v(t,e.task),1e3),e.task(null,t)}return{main:function(e,t,n,i){var s,o,a,l;switch(arguments.length){case 1:o=e;break;case 2:o=e,a=t;break;case 3:o=e,a=t,l=n;break;case 4:s=e,o=t,a=n,l=i}return this.set("title",s),this.set("message",o),this.set("onok",a),this.set("oncancel",l),this},setup:function(){return{buttons:[{text:k.defaults.glossary.ok,key:t.ENTER,className:k.defaults.theme.ok},{text:k.defaults.glossary.cancel,key:t.ESC,invokeOnClose:!0,className:k.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"labels":"ok"in n&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=n.ok,this.__internal.buttons[0].element.innerHTML=n.ok),"cancel"in n&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=n.cancel,this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===n?0:1}},callback:function(e){var t;switch(n(this),e.index){case 0:"function"==typeof this.get("onok")&&void 0!==(t=this.get("onok").call(this,e))&&(e.cancel=!t);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(t=this.get("oncancel").call(this,e))&&(e.cancel=!t)}},autoOk:function(e){return i(this,0,e),this},autoCancel:function(e){return i(this,1,e),this}}}),k.dialog("prompt",function(){var n=document.createElement("INPUT"),i=document.createElement("P");return{main:function(e,t,n,i,s){var o,a,l,r,c;switch(arguments.length){case 1:a=e;break;case 2:a=e,l=t;break;case 3:a=e,l=t,r=n;break;case 4:a=e,l=t,r=n,c=i;break;case 5:o=e,a=t,l=n,r=i,c=s}return this.set("title",o),this.set("message",a),this.set("value",l),this.set("onok",r),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:k.defaults.glossary.ok,key:t.ENTER,className:k.defaults.theme.ok},{text:k.defaults.glossary.cancel,key:t.ESC,invokeOnClose:!0,className:k.defaults.theme.cancel}],focus:{element:n,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){n.className=k.defaults.theme.input,n.setAttribute("type","text"),n.value=this.get("value"),this.elements.content.appendChild(i),this.elements.content.appendChild(n)},prepare:function(){},setMessage:function(t){"string"==typeof t?(c(i),i.innerHTML=t):t instanceof e.HTMLElement&&i.firstChild!==t&&(c(i),i.appendChild(t))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(e,t,i){switch(e){case"message":this.setMessage(i);break;case"value":n.value=i;break;case"type":switch(i){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":n.type=i;break;default:n.type="text"}break;case"labels":i.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i.ok),i.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(e){var t;switch(e.index){case 0:this.settings.value=n.value,"function"==typeof this.get("onok")&&void 0!==(t=this.get("onok").call(this,e,this.settings.value))&&(e.cancel=!t);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(t=this.get("oncancel").call(this,e))&&(e.cancel=!t),e.cancel||(n.value=this.settings.value)}}}}),"object"==typeof module&&"object"==typeof module.exports?module.exports=k:"function"==typeof define&&define.amd?define([],function(){return k}):e.alertify||(e.alertify=k)}("undefined"!=typeof window?window:this);
function fill(a){var n=a.split("#"),i=n[0];$("#search").val(n[1]),$("#id_pacijenta").val(i),$("#ispis_napomene_pacijenta").val("Napomena: "+n[3]+"\nNaočare-daljina:\n  OD: "+n[4]+"\n  OS: "+n[5]+"\nNaočare-blizina:\n  OD: "+n[6]+"\n  OS: "+n[7]+"\nSočiva:\n  OD: "+n[8]+"\n  OS: "+n[9]),$("#patientGeneralsRecords").val(n[1]),$("#contactPatientRecords").val(n[2]),$("#notePatientRecords").val(n[3]),$("#naocare_daljina_od").val(n[4]),$("#naocare_daljina_os").val(n[5]),$("#naocare_blizina_od").val(n[6]),$("#naocare_blizina_os").val(n[7]),$("#sociva_od").val(n[8]),$("#sociva_os").val(n[9]),$("#display").hide(),getPatientExaminationDate(i)}
   $(document).ready(function() {
       $("#search").keyup(function() {
           var name = $('#search').val().replace(/'/g, "\\'");
           if (name == "") {
               $("#display").html("");
           }
           else {
               $.ajax({
                   type: "POST",
                   url: "ajax.php",
                   data: {
                       search: name
                   },
                   success: function(html) {
                       $("#display").html(html).show();
                   }
               });
           }
       });
    });
function getPatientExaminationDate(t){$.ajax({type:"POST",url:"datePatientRecord.php",dataType:"html",data:{id_pacijenta:t},success:function(t){$("#responsecontainer").html(t)}})}
function addPatientCheckForm(){var e,a,n,t,o,i,d,c,l,m,_,u;if(e=document.getElementById("ime_pacijenta").value,a=document.getElementById("ime_oca_pacijenta").value,n=document.getElementById("prezime_pacijenta").value,t=document.getElementById("godiste_pacijenta").value,o=document.getElementById("kontakt_pacijenta").value,i=document.getElementById("napomena_pacijenta").value,l=document.getElementById("naocare_daljina_od").value,m=document.getElementById("naocare_daljina_os").value,d=document.getElementById("naocare_blizina_od").value,c=document.getElementById("naocare_blizina_os").value,_=document.getElementById("sociva_od").value,u=document.getElementById("sociva_os").value,0==e.length||0==n.length||0==t.length||0==o.length)return alertify.alert("Niste unijeli sve podatke!","Obavezna polja za unos su: Ime; Prezime; Godina rođenja; Kontakt"),!1;$.ajax({type:"POST",url:"addPatientDB.php",dataType:"json",data:{ime_pacijenta:e,ime_oca_pacijenta:a,prezime_pacijenta:n,godiste_pacijenta:t,kontakt_pacijenta:o,napomena_pacijenta:i,naocare_daljina_od:l,naocare_daljina_os:m,naocare_blizina_od:d,naocare_blizina_os:c,sociva_od:_,sociva_os:u},success:function(){},error:function(){window.location.href="../pregled/addPatientForm.php?msg=0"}})}
function updatePatientCheckForm(){var id_pacijenta="",generalije_pacijenta="",kontakt_pacijenta="",napomena_pacijenta="",naocare_daljina_od="",naocare_daljina_os="",naocare_blizina_od="",naocare_blizina_os="",sociva_od="",sociva_os="";id_pacijenta=document.getElementById("id_pacijenta").value,generalije_pacijenta=document.getElementById("patientGeneralsRecords").value,kontakt_pacijenta=document.getElementById("contactPatientRecords").value,napomena_pacijenta=document.getElementById("notePatientRecords").value,naocare_daljina_od=document.getElementById("naocare_daljina_od").value,naocare_daljina_os=document.getElementById("naocare_daljina_os").value,naocare_blizina_od=document.getElementById("naocare_blizina_od").value,naocare_blizina_os=document.getElementById("naocare_blizina_os").value,sociva_od=document.getElementById("sociva_od").value,sociva_os=document.getElementById("sociva_os").value;
	if (id_pacijenta == 0){alertify.alert('Informacija',"Niste izabrali klijenta");return false;}
	if ((generalije_pacijenta.length == 0)){alertify.error('Greška! Obavezno polje je prazno');document.getElementById('patientGeneralsRecords').focus();return false;}
	if ((kontakt_pacijenta.length == 0)){alertify.error('Greška! Obavezno polje je prazno');document.getElementById('contactPatientRecords').focus();return false;}
	alertify.confirm("Potvrda","Da li ste sigurni da želite ažurirati podatke o klijentu?",
  function(){
	$.ajax({
          type: 'POST',
          url: 'updatePatientDB.php',
          dataType: 'json',
          data: ({
		   id_pacijenta: id_pacijenta,
           generalije_pacijenta: generalije_pacijenta,
		   kontakt_pacijenta: kontakt_pacijenta,
		   napomena_pacijenta: napomena_pacijenta,
		   naocare_daljina_od: naocare_daljina_od,
		   naocare_daljina_os: naocare_daljina_os,
		   naocare_blizina_od: naocare_blizina_od,
		   naocare_blizina_os: naocare_blizina_os,
		   sociva_od: sociva_od,
		   sociva_os: sociva_os
          }),
          success: function() {
           window.location.href = "../pregled/patientRecords.php?msg=1";
          },
          error: function() {
             window.location.href = "../pregled/patientRecords.php?msg=0";
          }
        });
  },
  function(){
  }).set('labels', {
            ok: 'Da',
            cancel: 'Ne'
        });;
	
		
}
function checkLensesFormExamination() {var vrsta_pregleda="sociva",radnik=null,id_radnika=null,sifra_radnika="",ime_prezime_pacijenta="",id_pacijenta="",datum_pregleda="",anamneza="",vod="",vos="",vod1="",vos1="",v1="",v2="",v11="",v22="",motilitet="",bms_od="",bms_os="",tonus_od="",tonus_os="",fundus_od="",fundus_os="",dijagnoza="",terapija="",proizvodjac_ks_od="",period_ks_od="",tip_ks_od="",id_sociva="",tip_ks_os="",jacina_ks_od="",bc_ks_od="",velicina_ks_od="",boja_ks_od="",proizvodjac_ks_os="",period_ks_os="",jacina_ks_os=(tip_ks_os="",period_ks_os="",""),bc_ks_os="",velicina_ks_os="",boja_ks_os="",kontrola="",napomena_pregleda="";try{radnik=document.getElementById("radnik").textContent}catch(e){radnik="",console.log(e.message)}try{id_radnika=document.getElementById("id_radnika").textContent}catch(e){id_radnika=""}sifra_radnika=document.getElementById("sifra_radnika").value,ime_prezime_pacijenta=document.getElementById("search").value,id_pacijenta=$('input[name="id_pacijenta"]').val(),datum_pregleda=document.getElementById("datum_pregleda").value,anamneza=document.getElementById("anamneza").value,v1=document.getElementById("vod").value,v2=document.getElementById("vos").value,v11=document.getElementById("vod1").value,v22=document.getElementById("vos1").value;try{motilitet=document.getElementById("motilitet").value}catch(e){motilitet=""}try{bms_od=document.getElementById("bms_od").value}catch(e){bms_od=""}try{bms_os=document.getElementById("bms_os").value}catch(e){bms_os=""}try{tonus_od=document.getElementById("tonus_od").value}catch(e){tonus_od=""}try{tonus_os=document.getElementById("tonus_os").value}catch(e){tonus_os=""}try{fundus_od=document.getElementById("fundus_od").value}catch(e){fundus_od=""}try{fundus_os=document.getElementById("fundus_os").value}catch(e){fundus_os=""}try{dijagnoza=document.getElementById("dijagnoza").value}catch(e){dijagnoza=""}try{terapija=document.getElementById("terapija").value}catch(e){terapija=""}proizvodjac_ks_od=$("#proizvodjac_ks_od option:selected").text(),period_ks_od=$("#period_ks_od option:selected").text(),tip_ks_od=$("#tip_ks_od option:selected").text(),jacina_ks_od=document.getElementById("jacina_ks_od").value,bc_ks_od=document.getElementById("bc_ks_od").value,velicina_ks_od=document.getElementById("velicina_ks_od").value,boja_ks_od=document.getElementById("boja_ks_od").value,proizvodjac_ks_os=$("#proizvodjac_ks_os option:selected").text(),period_ks_os=$("#period_ks_os option:selected").text(),tip_ks_os=$("#tip_ks_os option:selected").text(),jacina_ks_os=document.getElementById("jacina_ks_os").value,bc_ks_os=document.getElementById("bc_ks_os").value,velicina_ks_os=document.getElementById("velicina_ks_os").value,boja_ks_os=document.getElementById("boja_ks_os").value,kontrola=document.getElementById("kontrola").value,napomena_pregleda=document.getElementById("napomena_pregleda").value;
    if (radnik.length == 0) {document.getElementById("sifra_radnika").focus();alertify.alert('Informacija', "Niste unijeli šifru radnika koji obavlja pregled!");return false;}
    if (id_pacijenta.length == 0) {return false;}
    if (v1.length == 0) {document.getElementById("vod").focus();alertify.alert('Informacija', "Niste unijeli VOD");return false;}
    if (v11.length == 0) {document.getElementById("vod1").focus();alertify.alert('Informacija', "Niste unijeli VOD");return false;}
    if (v2.length == 0) {document.getElementById("vos").focus();alertify.alert('Informacija', "Niste unijeli VOS");return false;}
    if (v22.length == 0) {document.getElementById("vos1").focus();alertify.alert('Informacija', "Niste unijeli VOS");return false;}
    if ((proizvodjac_ks_od.length == 0) && (proizvodjac_ks_os.length == 0)) {alertify.alert('Informacija', "Niste izabrali proizvođača sočiva");return false;}
    if (proizvodjac_ks_od.length != 0) {
        if (period_ks_od.length != 0) {
            if (tip_ks_od != 0) {
                if (jacina_ks_od != 0) {
                    if (bc_ks_od != 0) {
                        if (velicina_ks_od != 0) {
                            id_sociva = $('#tip_ks_od').val();
                        } else {
                            document.getElementById("velicina_ks_od").focus();
                            alertify.alert('Informacija', "Niste unijeli veliinu sočiva");
                            return false;
                        }
                    } else {
                        document.getElementById("bc_ks_od").focus();
                        alertify.alert('Informacija', "Niste unijeli baznu krivinu sočiva");
                        return false;
                    }
                } else {
                    document.getElementById("jacina_ks_od").focus();
                    alertify.alert('Informacija', "Niste unijeli jačinu sočiva");
                    return false;
                }
            } else {
                document.getElementById("tip_ks_od").focus();
                alertify.alert('Informacija', "Niste izabrali tip sočiva");
                return false;
            }
        } else {
            document.getElementById("period_ks_od").focus();
            alertify.alert('Informacija', "Niste izabrali period sočiva");
            return false;
        }
    }
    if (proizvodjac_ks_os.length != 0) {
        if (period_ks_os.length != 0) {
            if (tip_ks_os != 0) {
                if (jacina_ks_os != 0) {
                    if (bc_ks_os != 0) {
                        if (velicina_ks_os != 0) {
                            id_sociva = $('#tip_ks_os').val();
                        } else {
                            document.getElementById("velicina_ks_os").focus();
                            alertify.alert('Informacija', "Niste unijeli veliinu sočiva");
                            return false;
                        }
                    } else {
                        document.getElementById("bc_ks_os").focus();
                        alertify.alert('Informacija', "Niste unijeli baznu krivinu sočiva");
                        return false;
                    }
                } else {
                    document.getElementById("jacina_ks_os").focus();
                    alertify.alert('Informacija', "Niste unijeli jačinu sočiva");
                    return false;
                }
            } else {
                document.getElementById("tip_ks_os").focus();
                alertify.alert('Informacija', "Niste izabrali tip sočiva");
                return false;
            }
        } else {
            document.getElementById("period_ks_os").focus();
            alertify.alert('Informacija', "Niste izabrali period sočiva");
            return false;
        }
    }
    vod = v1 + " sa cc: " + v11
    vos = v2 + " sa cc: " + v22
    var success = radnik + '@@@' + ime_prezime_pacijenta + '@@@' + datum_pregleda + '@@@' + anamneza + '@@@' + vod + '@@@' + vos.replace(/\+/g, '%2B ') + '@@@' + motilitet + '@@@' + bms_od + '@@@' + bms_os + '@@@' + tonus_od + '@@@' + tonus_os + '@@@' + fundus_od + '@@@' + fundus_os + '@@@' + dijagnoza + '@@@' + terapija + '@@@' + proizvodjac_ks_od + '@@@' + period_ks_od + '@@@' + tip_ks_od + '@@@' + jacina_ks_od + '@@@' + bc_ks_od + '@@@' + velicina_ks_od + '@@@' + boja_ks_od + '@@@' + proizvodjac_ks_os + '@@@' + period_ks_os + '@@@' + tip_ks_os + '@@@' + jacina_ks_os + '@@@' + bc_ks_os + '@@@' + velicina_ks_os + '@@@' + boja_ks_os + '@@@' + kontrola + '@@@' + napomena_pregleda;
    $.ajax({
        type: 'POST',
        url: 'addExaminationDB.php',
        dataType: 'json',
        data: ({
            vrsta_pregleda: vrsta_pregleda,
            id_radnika: id_radnika,
            ime_prezime_pacijenta: ime_prezime_pacijenta,
            id_pacijenta: id_pacijenta,
            anamneza: anamneza,
            vod: vod,
            vos: vos,
            motilitet: motilitet,
            bms_od: bms_od,
            bms_os: bms_os,
            tonus_od: tonus_od,
            tonus_os: tonus_os,
            fundus_od: fundus_od,
            fundus_os: fundus_os,
            dijagnoza: dijagnoza,
            terapija: terapija,
            proizvodjac_ks_od: proizvodjac_ks_od,
            period_ks_od: period_ks_od,
            tip_ks_od: tip_ks_od,
            jacina_ks_od: jacina_ks_od,
            bc_ks_od: bc_ks_od,
            velicina_ks_od: velicina_ks_od,
            boja_ks_od: boja_ks_od,
            proizvodjac_ks_os: proizvodjac_ks_os,
            period_ks_os: period_ks_os,
            tip_ks_os: tip_ks_os,
            jacina_ks_os: jacina_ks_os,
            bc_ks_os: bc_ks_os,
            velicina_ks_os: velicina_ks_os,
            boja_ks_os: boja_ks_os,
            kontrola: kontrola,
            napomena_pregleda: napomena_pregleda,
            id_sociva: id_sociva
        }),
        success: function() {
            location.reload();
        },
        error: function() {
            window.location.href = "../pregled/examinationReportLenses.php?success=" + encodeURIComponent(success);
        }
    });
}
function checkFormExamination() {
	  var vrsta_pregleda = "naocare";
	  var radnik = null;
	  var id_radnika = null;
	  var sifra_radnika = "";
	  var ime_prezime_pacijenta="";
	  var id_pacijenta ="";
      var datum_pregleda = "";
	  var anamneza = "";
      var vod = "";
      var vos = "";
	  var vod1 = "";
	  var vos1 = "";
	  var v1 = "";
      var v2 = "";
	  var v11 = "";
      var v22 = "";
      var motilitet = "";
      var bms_od = "";
      var bms_os = "";
      var tonus_od = "";
      var tonus_os = "";
      var fundus_od = "";
      var fundus_os = "";
      var dijagnoza = "";
	  var terapija="";
      var korekcija_daljina_od = "";
      var korekcija_daljina_os = "";
	  var korekcija_blizina_od = "";
      var korekcija_blizina_os = "";
      var pd = "";
      var kontrola = "";
      var napomena_pregleda = "";
	 
	  try{
	  radnik = document.getElementById("radnik").textContent;
	  } catch(err){
		  radnik = "";
		  console.log(err.message);
	  }
	  try{
	  id_radnika = document.getElementById("id_radnika").textContent;
      } catch(err){
          id_radnika = "";
	  }
	  
	  sifra_radnika = document.getElementById("sifra_radnika").value;
	  ime_prezime_pacijenta = document.getElementById("search").value;
      id_pacijenta =$('input[name="id_pacijenta"]').val();
      datum_pregleda = document.getElementById("datum_pregleda").value;
	  anamneza = document.getElementById("anamneza").value;
      v1 = document.getElementById("vod").value;
      v2 = document.getElementById("vos").value;
	  v11 = document.getElementById("vod1").value;
      v22 = document.getElementById("vos1").value;
      try{
		   motilitet = document.getElementById("motilitet").value;
	  }catch(err){
		   motilitet="";
	  }
	  try{
		   bms_od = document.getElementById("bms_od").value;
	  }catch(err){
		   bms_od="";
	  }
	  try{
		  bms_os = document.getElementById("bms_os").value;
	  }catch(err){
		  bms_os="";
	  }
	    try{
		  tonus_od = document.getElementById("tonus_od").value;
	  }catch(err){
		  tonus_od="";
	  }
	  try{
		  tonus_os = document.getElementById("tonus_os").value;
	  }catch(err){
		  tonus_os="";
	  }
	  try{
		  fundus_od = document.getElementById("fundus_od").value;
	  }catch(err){
		  fundus_od="";
	  }
	   try{
		  fundus_os = document.getElementById("fundus_os").value;
	  }catch(err){
		  fundus_os="";
	  }
	  try{
		  dijagnoza = document.getElementById("dijagnoza").value;
	  }catch(err){
		  dijagnoza="";
	  }
	   try{
		  terapija = document.getElementById("terapija").value;
	  }catch(err){
		   terapija="";
	  }
      korekcija_daljina_od = document.getElementById("korekcija_daljina_od").value;
      korekcija_daljina_os = document.getElementById("korekcija_daljina_os").value;
	  korekcija_blizina_od = document.getElementById("korekcija_blizina_od").value;
      korekcija_blizina_os = document.getElementById("korekcija_blizina_os").value;
      
      pd = document.getElementById("pd").value;
      kontrola = document.getElementById("kontrola").value;
      napomena_pregleda = document.getElementById("napomena_pregleda").value;

	  if (radnik.length == 0){
		  document.getElementById("sifra_radnika").focus();
		  alertify.alert('Informacija',"Niste unijeli šifru radnika koji obavlja pregled!"); 
		  return false;
	  }
      if(id_pacijenta.length == 0){
		  alertify.alert('Informacija',"Niste izabrali klijenta za pregled"); 
		  return false;
	  }
	  if(pd.length == 0){
		  document.getElementById("pd").focus();
		  alertify.alert('Informacija',"Niste unijeli pupilarnu distancu (PD)!");
		  return false;
	  }
	  if(v1.length == 0){
		  document.getElementById("vod").focus();
		  alertify.alert('Informacija',"Niste unijeli VOD");
		  return false;
	  }
	  if(v11.length == 0){
		  document.getElementById("vod1").focus();
		  alertify.alert('Informacija',"Niste unijeli VOD");
		  return false;
	  }
	  if(v2.length == 0){
		  document.getElementById("vos").focus();
		  alertify.alert('Informacija',"Niste unijeli VOS");
		  return false;
	  }
	  if(v22.length == 0){
		  document.getElementById("vos1").focus();
		  alertify.alert('Informacija',"Niste unijeli VOS");
		  return false;
	  }
	  
	  vod = v1 +" sa cc: "+v11
	  vos = v2 +" sa cc: "+v22
	   
	 var success = radnik + '@@@'+ ime_prezime_pacijenta + '@@@' + datum_pregleda + '@@@' + anamneza + '@@@' + vod + '@@@' + vos + '@@@' + motilitet + '@@@' + bms_od + '@@@' + bms_os + '@@@' + tonus_od + '@@@' + tonus_os + '@@@' + fundus_od + '@@@' + fundus_os + '@@@' + dijagnoza + '@@@' + terapija +'@@@'+ korekcija_daljina_od + '@@@' + korekcija_daljina_os + '@@@' + korekcija_blizina_od + '@@@' + korekcija_blizina_os + '@@@' + pd + '@@@' + kontrola + '@@@'+napomena_pregleda;
	 
      $.ajax({
        type: 'POST',
        url: 'addExaminationDB.php',
        dataType: 'json',
        data: ({
		  vrsta_pregleda:vrsta_pregleda,
		  id_radnika: id_radnika,
		  ime_prezime_pacijenta : ime_prezime_pacijenta,
          id_pacijenta: id_pacijenta,
          anamneza: anamneza,
          vod: vod,
          vos: vos,
          motilitet: motilitet,
          bms_od: bms_od,
          bms_os: bms_os,
          tonus_od: tonus_od,
          tonus_os: tonus_os,
          fundus_od: fundus_od,
          fundus_os: fundus_os,
          dijagnoza: dijagnoza,
		  terapija: terapija,
          korekcija_daljina_od: korekcija_daljina_od,
          korekcija_daljina_os: korekcija_daljina_os,
		  korekcija_blizina_od: korekcija_blizina_od,
          korekcija_blizina_os: korekcija_blizina_os,
          pd: pd,
          kontrola: kontrola,
          napomena_pregleda: napomena_pregleda
        }),
        success: function() {
          location.reload();
        },
        error: function() {
		  window.location.href = "../pregled/examinationReport.php?success="+encodeURIComponent(success);
        }
      });
	  
    }
	
 function checkUser(sifra, id_pregleda) {
    alertify.prompt("Potvrda", "Unesite svoj ID", "",
        function(evt, value) {
            var sifra_radnika = sifra;
            if (value == sifra_radnika) {
                updateFormExamination(id_pregleda);
            } else {
                alertify.alert("Greška","Uneseni ID radnika ne odgovara onom koji je kreirao izvještaj").set({onshow:null, onclose:function(){  location.reload();}});
            }
        },
        function() {
        }).set('type', 'password');
		
}
	
function updateFormExamination(id_pregleda) {
	 
	  var anamneza = "";
	  var vod = "";
	  var vos = "";
	  var motilitet = "";
	  var tonus_od = "";
	  var tonus_os = "";
	  var bms_od = "";
	  var bms_os = "";
	  var tonus_od = "";
      var tonus_os = "";
      var fundus_od = "";
      var fundus_os = "";
      var dijagnoza = "";
	  var terapija="";
      var korekcija_daljina_od = "";
      var korekcija_daljina_os = "";
	  var korekcija_blizina_od = "";
      var korekcija_blizina_os = "";
      var tip_ks_od = "";
      var tip_ks_os = "";
      var jacina_ks_od = "";
      var bc_ks_od = "";
      var velicina_ks_od = "";
      var boja_ks_od = "";
      var tip_ks_os = "";
      var jacina_ks_os = "";
      var bc_ks_os = "";
      var velicina_ks_os = "";
      var boja_ks_os = "";
      var pd = "";
      var kontrola = "";
      var napomena_pregleda = "";
	 
	  anamneza = document.getElementById("inputAnamenzaReport").value;
	  vod = document.getElementById("inputVodReport").value;
	  vos = document.getElementById("inputVosReport").value;
	  motilitet = document.getElementById("inputMotilitetReport").value;
	  tonus_od = document.getElementById("inputTonusOdReport").value;
	  tonus_os = document.getElementById("inputTonusOsReport").value;
	  bms_od = document.getElementById("inputBmsOdReport").value;
	  bms_os = document.getElementById("inputBmsOsReport").value;
	  fundus_od = document.getElementById("inputFundusOdReport").value;
	  fundus_os = document.getElementById("inputFundusOsReport").value;
	  dijagnoza = document.getElementById("inputDiagnoseReport").value;
	  terapija = document.getElementById("inputTherapyReport").value;
      korekcija_daljina_od = document.getElementById("inputDistanceCorrectionOdReport").value;
      korekcija_daljina_os = document.getElementById("inputDistanceCorrectionOsReport").value;
	  korekcija_blizina_od = document.getElementById("inputProximityCorrectionOdReport").value;
      korekcija_blizina_os = document.getElementById("inputProximityCorrectionOsReport").value;
	  pd = document.getElementById("inputPdReport").value;
	  
	  proizvodjac_ks_od = document.getElementById("proizvodjac_ks_od").value;
	  period_ks_od = document.getElementById("period_ks_od").value;
      tip_ks_od = document.getElementById("tip_ks_od").value;
      jacina_ks_od = document.getElementById("jacina_ks_od").value;
      bc_ks_od = document.getElementById("bc_ks_od").value;
      velicina_ks_od = document.getElementById("velicina_ks_od").value;
      boja_ks_od = document.getElementById("boja_ks_od").value;
	  proizvodjac_ks_os = document.getElementById("proizvodjac_ks_os").value;
	  period_ks_os = document.getElementById("period_ks_os").value;
      tip_ks_os = document.getElementById("tip_ks_os").value;
      jacina_ks_os = document.getElementById("jacina_ks_os").value;
      bc_ks_os = document.getElementById("bc_ks_os").value;
      velicina_ks_os = document.getElementById("velicina_ks_os").value;
      boja_ks_os = document.getElementById("boja_ks_os").value;
      kontrola = document.getElementById("inputControlReport").value;
      napomena_pregleda = document.getElementById("inputNoteExaminationReport").value;
	  
	  if(vod.length == 0){
		  document.getElementById("inputVodReport").focus();
		  alertify.alert('Informacija',"Polje sa podacima o VOD ne može biti prazno!");
		  return false;
	  }
	  if(vos.length == 0){
		  document.getElementById("inputVosReport").focus();
		  alertify.alert('Informacija',"Polje sa podacima o VOS ne može biti prazno!");
		  return false;
	  }
	  
      $.ajax({
        type: 'POST',
        url: 'updateExaminationDB.php',
        dataType: 'json',
        data: ({
		  id_pregleda:id_pregleda,
          anamneza: anamneza,
		  vod:vod,
		  vos:vos,
		  motilitet:motilitet,
		  tonus_od:tonus_od,
		  tonus_os:tonus_os,
		  bms_od:bms_od,
		  bms_os:bms_os,
		  tonus_od: tonus_od,
          tonus_os: tonus_os,
          fundus_od: fundus_od,
          fundus_os: fundus_os,
          dijagnoza: dijagnoza,
		  terapija: terapija,
          korekcija_daljina_od: korekcija_daljina_od,
          korekcija_daljina_os: korekcija_daljina_os,
		  korekcija_blizina_od: korekcija_blizina_od,
          korekcija_blizina_os: korekcija_blizina_os,
		  proizvodjac_ks_od : proizvodjac_ks_od,
	      period_ks_od : period_ks_od,
          tip_ks_od: tip_ks_od,
          jacina_ks_od: jacina_ks_od,
          bc_ks_od: bc_ks_od,
          velicina_ks_od: velicina_ks_od,
          boja_ks_od: boja_ks_od,
		  proizvodjac_ks_os : proizvodjac_ks_os,
	      period_ks_os : period_ks_os,
          tip_ks_os: tip_ks_os,
          jacina_ks_os: jacina_ks_os,
          bc_ks_os: bc_ks_os,
          velicina_ks_os: velicina_ks_os,
          boja_ks_os: boja_ks_os,
          pd: pd,
          kontrola: kontrola,
          napomena_pregleda: napomena_pregleda
        }),
        success: function() {
          location.reload();
        },
        error: function() {
			 alertify.alert("Informacija","Izvještaj je uspiješno ažuriran").set({onshow:null, onclose:function(){  location.reload();}});
			
        }
      });
	  
    }
	
function checkWorkOrderDocument() {

    var vrsta_pregleda = "";
    var broj_radnog_naloga = "";
    var id_pacijenta = "";
    var datum = "";
    var desno_d_sph = "";
    var desno_d_cyl = "";
    var desno_d_ax = "";
    var desno_b_sph = "";
    var desno_b_cyl = "";
    var desno_b_ax = "";
    var lijevo_d_sph = "";
    var lijevo_d_cyl = "";
    var lijevo_d_ax = "";
    var lijevo_b_sph = "";
    var lijevo_b_cyl = "";
    var lijevo_b_ax = "";
    var pd_blizina = "";
    var pd_daljina = "";
    var napomena = "";
	var ukupno = "";
	var akontacija = "";
	var dug = "";

    if ($("#naocare_rb").is(":checked")) {
       vrsta_pregleda = "naocare";
	}
    else if ($("#sociva_rb").is(":checked")) {
       vrsta_pregleda = "sociva";
    }

    broj_radnog_naloga = document.getElementById("broj_radnog_naloga").value;
    id_pacijenta = document.getElementById("id_pacijenta").value;
    datum = document.getElementById("datum").value;
    desno_d_sph = document.getElementById("desno_d_sph").value;
    desno_d_cyl = document.getElementById("desno_d_cyl").value;
    desno_d_ax = document.getElementById("desno_d_ax").value;
    desno_b_sph = document.getElementById("desno_b_sph").value;
    desno_b_cyl = document.getElementById("desno_b_cyl").value;
    desno_b_ax = document.getElementById("desno_b_ax").value;
    lijevo_d_sph = document.getElementById("lijevo_d_sph").value;
    lijevo_d_cyl = document.getElementById("lijevo_d_cyl").value;
    lijevo_d_ax = document.getElementById("lijevo_d_ax").value;
    lijevo_b_sph = document.getElementById("lijevo_b_sph").value;
    lijevo_b_cyl = document.getElementById("lijevo_b_cyl").value;
    lijevo_b_ax = document.getElementById("lijevo_b_ax").value;
    pd_blizina = document.getElementById("pd_blizina").value;
    pd_daljina = document.getElementById("pd_daljina").value;
    napomena = document.getElementById("napomena").value;
	ukupno = document.getElementById("ukupno").value;
	akontacija = document.getElementById("akontacija").value;
	dug = document.getElementById("dug").value;

    if (broj_radnog_naloga.length == 0) {
        document.getElementById("broj_radnog_naloga").focus();
        alertify.alert('Informacija', "Unesite broj radnog naloga №");
        return false;
    }
	
	if (isNaN(broj_radnog_naloga)){
		document.getElementById("broj_radnog_naloga").focus();
        alertify.alert('Greška', "Neispravni unos broja radnog naloga!");
        return false;
	}

    if (id_pacijenta.length == 0) {
        document.getElementById("search").focus();
        alertify.alert('Informacija', "Niste izabrali klijenta!");
        return false;
    }
	
	//Check date////////////////////////////////////////////////////
    if (datum.length == 0) {
        document.getElementById("datum").focus();
        alertify.alert('Informacija', "Niste unijeli datum ");
        return false;
    }
	
	if(!/^\d{1,2}\.\d{1,2}\.\d{4}$/.test(datum)){
		document.getElementById("datum").focus();
		alertify.alert('Informacija',"Neispravan format datuma");
		return false;
	}
	
	// Parse the date parts to integers
    var parts = datum.split(".");
    var day = parseInt(parts[0], 10);
    var month = parseInt(parts[1], 10);
    var year = parseInt(parts[2], 10);

    // Check the ranges of month and year
    if(year < 2000 || year > 2050 || month == 0 || month > 12 || day == 0){
	document.getElementById("datum").focus();
	alertify.alert('Informacija',"Neispravan format datuma");
	return false;
	}
	
	var monthLength = [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];
	
	// Adjust for leap years
    if(year % 400 == 0 || (year % 100 != 0 && year % 4 == 0)){
	    monthLength[1] = 29;
	}
	
	if ((month == '01') && (day > monthLength[0])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '02') && (day > monthLength[1])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '03') && (day > monthLength[2])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '04') && (day > monthLength[3])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '05') && (day > monthLength[4])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '06') && (day > monthLength[5])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '07') && (day > monthLength[6])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '08') && (day > monthLength[7])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '09') && (day > monthLength[8])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '10') && (day > monthLength[9])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '11') && (day > monthLength[10])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	
	if ((month == '12') && (day > monthLength[11])){
		document.getElementById("datum").focus();
	    alertify.alert('Informacija',"Neispravan format datuma");
	    return false;
	}
	//////////////////////////////////////////////////////////////	
	
	if (vrsta_pregleda == "naocare"){
    if ((pd_blizina.length == 0) && (pd_daljina.length == 0)) {
        alertify.alert('Informacija', "Niste unijeli PD ");
        return false;
    }
	}
	
	if (napomena.length == 0) {
        document.getElementById("napomena").focus();
        alertify.alert('Informacija', "Niste unijeli napomenu ");
        return false;
    }
	
	if (ukupno.length == 0) {
        document.getElementById("ukupno").focus();
        alertify.alert('Informacija', "Niste unijeli ukupan iznos ");
        return false;
    }
	
	if (isNaN(ukupno)){
		document.getElementById("ukupno").focus();
        alertify.alert('Greška', "Neispravan unos ukupnog iznosa ");
        return false;
	}
	
	if (akontacija.length == 0) {
        document.getElementById("akontacija").focus();
        alertify.alert('Informacija', "Niste unijeli iznos akontacije ");
        return false;
    }
	
	if (isNaN(akontacija)){
		document.getElementById("akontacija").focus();
        alertify.alert('Greška', "Neispravan unos iznosa akontacija ");
        return false;
	}
	
	if (dug.length == 0) {
        document.getElementById("dug").focus();
        alertify.alert('Informacija', "Niste unijeli iznos duga ");
        return false;
    }
	
	if (isNaN(ukupno)){
		document.getElementById("dug").focus();
        alertify.alert('Greška', "Neispravan unos iznosa duga ");
        return false;
	}
	
	if (dug != (ukupno - akontacija)){
		document.getElementById("dug").focus();
        alertify.alert('Greška', "Neispravan iznosa duga. (Ukupno - Akontacija = Dug) ");
        return false;
	}
	
	 $.ajax({
        type: 'POST',
        url: 'addWorkOrderDB.php',
        dataType: 'json',
        data: ({
		  vrsta_pregleda: vrsta_pregleda,
		  broj_radnog_naloga : broj_radnog_naloga,
          id_pacijenta : id_pacijenta,
		  datum: datum,
          desno_d_sph : desno_d_sph,
          desno_d_cyl : desno_d_cyl,
          desno_d_ax : desno_d_ax,
          desno_b_sph : desno_b_sph,
          desno_b_cyl : desno_b_cyl,
          desno_b_ax : desno_b_ax,
          lijevo_d_sph : lijevo_d_sph,
          lijevo_d_cyl : lijevo_d_cyl,
          lijevo_d_ax : lijevo_d_ax,
          lijevo_b_sph : lijevo_b_sph,
          lijevo_b_cyl : lijevo_b_cyl,
          lijevo_b_ax : lijevo_b_ax,
          pd_blizina : pd_blizina,
          pd_daljina : pd_daljina,
          napomena : napomena,
	      ukupno : ukupno,
		  akontacija: akontacija,
		  dug: dug
        }),
        success: function() {
          window.location.href = "../pregled/addWorkOrderDocumentForm.php?msg=1";
        },
        error: function() {
		  window.location.href = "../pregled/addWorkOrderDocumentForm.php?msg=0";
			
        }
      });
}


	
	
	
	
	
	